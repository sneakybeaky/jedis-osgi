<?xml version="1.0" encoding="UTF-8"?>

<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0">

    <bean id="dataSource" class="redis.clients.jedis.JedisPool"
          destroy-method="destroy">
        <argument index="0" ref="jedisConfig"/>
        <argument index="1" value="localhost"/>
        <argument index="2" value="6379"/>
    </bean>

    <bean id="jedisConfig" class="redis.clients.jedis.JedisPoolConfig">
        <property name="testWhileIdle" value="true"/>
    </bean>

    <service ref="dataSource" interface="redis.clients.jedis.JedisPool">
        <service-properties>
            <entry key="osgi.jndi.service.name" value="jedis/leaderboard"/>
        </service-properties>
    </service>

    <bean id="poolSource" class="com.ninedemons.osgi.jedis.simple.SimpleJedisPoolSource">
        <argument index="0" ref="dataSource"/>
    </bean>

    <service ref="poolSource" interface="com.ninedemons.osgi.jedis.JedisPoolSource">
        <service-properties>
            <entry key="osgi.jndi.service.name" value="jedis-pool/leaderboard"/>
        </service-properties>
    </service>

</blueprint>
